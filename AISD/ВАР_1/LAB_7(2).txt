//#include "stdafx.h" разкоменть если что подйет не так
#include<iostream>
#include<string>
#include<conio.h>
#include<time.h>
#include<windows.h>

using namespace std;

struct Date//структура описывающаю дату
{
	int day;//день
	int mounth;//месяц
	int year;//год
};

Date randomtDate()//функция которая возращает случаюную дату
{
	Date date;

	date.day = rand() % 31 + 1;
	date.mounth = rand() % 12 + 1;
	date.year = rand() % 8 + 1990;

	return date;
}


class Stud//класс описывающий заказ
{
public:
	string FIO;//имя
	Date birth;//дата последниго ремонта
	int oz[4];
	int sred;//дата конца ремоннта

	Stud() {

	}

	Stud(string FIO)//конуструктор для инициализации данных класса
	{
		this->FIO = FIO;
		this->birth = randomtDate();

		double sum = 0;
		for (int i = 0; i < 4; i++)
		{
			this->oz[i] = rand() % 5 + 1;
			sum += this->oz[i];
		}
		this->sred = sum / 4;
	}
};

Stud studs[1000];//массив заказов
int len = 0;//кол-во заказов

void showMenu()//функция для вывода меню
{
	system("cls");
	cout << "===Выберети пункт===" << endl;
	cout << "1.Вывести студентов" << endl;
	cout << "2.Ввести студентов" << endl;
	cout << "3.Заполнить случайно" << endl;
	cout << "4.Сортировать по фамилиям" << endl;
	cout << "5.Выход" << endl;
}

void inputSize()//функция ввода кол-ва заказов
{
	cout << "Введите кол-во : ";
	cin >> len;
}

void outputOrder()//функция для вывода заказов
{
	cout << "---CТУДЕНТЫ---" << endl;
	for (int i = 0; i < len; i++)
	{
		cout << endl;
		cout << "-= № " << i;
		cout << "ФИО: " << studs[i].FIO << endl;
		cout << "Дата рождения: " << studs[i].birth.day << " " << studs[i].birth.mounth << " " << studs[i].birth.year << endl;
		cout << "Оценки: " << "АИСД-" << studs[i].oz[0] << " МАТ-" << studs[i].oz[1] << " ФИЗ-" << studs[i].oz[2] << " ПРОГ-" << studs[i].oz[3] << endl;
		cout << "Cредняя оценка: " << studs[i].sred << endl;
		cout << endl;
	}
	system("pause");
}

void inputOrder()//функция ввода и заполения массива заказов
{
	inputSize();

	for (int i = 0; i < len; i++)
	{
		string name;
		Date l;

		cout << "Введите ФИО студента №" << i + 1 << endl;
		cout << "ФИО = = ";
		cin >> name;
		l = randomtDate();

		Stud tmp(name);
		tmp.birth = l;

		studs[i] = tmp;
	}
}

void randomOrder()//функция для случайного заполенения массива заказов
{
	inputSize();

	for (int i = 0; i < len; i++)
	{
		string name, mark;
		Date l;

		name = "Имя_" + to_string(rand() % len);
		l = randomtDate();

		Stud tmp(name);
		tmp.birth = l;

		studs[i] = tmp;
	}
	system("pause");
}

void sortOrder()//функция сортировки заказов(взято из премеров с сайта)
{
	cout << "Сортировка методом..." << endl;
	int i, j, k;
	Stud x;
	for (i = 0; i<len - 1; i++)
	{
		x = studs[i]; k = i;

		for (j = i + 1; j<len; j++)
		{
			if (studs[j].FIO < x.FIO)
			{
				k = j;
				x = studs[k];
			}
		}

		studs[k] = studs[i];
		studs[i] = x;
	}
	system("pause");
}


int main()
{
	srand(time(NULL));

	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	//логика меню
	int choose = 0;
	while (choose != 5)
	{
		showMenu();
		cin >> choose;
		switch (choose)
		{
		case 1: outputOrder(); break;
		case 2: inputOrder(); break;
		case 3: randomOrder(); break;
		case 4: sortOrder(); break;
		default: cout << "Ошибка ввода" << endl; break;
		}
	}

	system("pause");
	return 1;
}

