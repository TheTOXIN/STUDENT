#include <iostream>
#include <string>
#include <math.h>
#include <locale.h>
#include <windows.h>

using namespace std;

struct TNode; 
//описываем тип-указатель на элемент структуры 
typedef TNode* PNode; //элемент списка 
struct TNode 
{ 
	int Data;  //поле данных  
	PNode Next; //поле указателя на следующий элемент 
};

//Добавление элемента в начало списка
void AddFirst(PNode& First, int Data) 
{ 
	PNode p = new TNode; 
	//указатель на новый элемент  
	p->Data = Data;  
	p->Next = First;  
	First = p; 
}

//Вставка элемента в середину списка 
void AddAfter(PNode& Pred, int Data) 
{ 
	PNode p = new TNode;  
	p->Data = Data;  
	p->Next = Pred->Next;  
	Pred->Next = p; 
}

//Вставка элемента в конец списка 
void AddLast(PNode& First, int Data) 
{ 
	PNode p1, p2 = First;  
	while (p2->Next != NULL) 
		p2 = p2->Next;  
	p1 = new TNode;  
	p1->Data = Data;  
	p2->Next = p1;  
	p1->Next = NULL; 
}

//Удаление элемента из начала списка 
void DelFirst(PNode& First) 
{ 
	PNode p = First;  
	First = First->Next;  
	delete p; 
}

//Удаление элемента из середины списка
void DelAfter(PNode& Pred) 
{ 
	PNode p = Pred->Next;  
	if (p)  
	{ 
		Pred->Next = p->Next;   
		delete p;  
	} 
} 

//Удаление элемента из конца списка 
void DelLast(PNode& First) 
{ 
	PNode p1 = First, p2;  
	while (p1->Next->Next != NULL)   
		p1 = p1->Next;  
	p2 = p1->Next;  
	p1->Next = NULL;  
	delete p2; 
} 

//Заполнение списка 
void InputList(PNode& First) 
{ 
	cout << "ВВОД СПИСКА" << endl;
	int n, Data;  
	cout<<"Введите количество элементов: ";  
	cin>>n;  
	for (int i=1; i<=n; i++)  
	{   
		cout<<"Введите элемент: ";   
		cin>>Data;   
		AddFirst(First, Data);  
	}
	cout << endl;
} 

//Обход и печать списка 
void PrintList(PNode First) 
{ 
	cout << "ВЫВОД СПИСКА" << endl;
	PNode p = First;  
	while (p)  
	{ 
		cout<<p->Data<<' ';   
		p = p->Next;  
	}  
	cout<<endl; 
} 

void MoveElement(PNode& First)
{
	int index;
	int count;

	cout << "ВВЕДИТЕ НОМЕР ЭЛЕМЕНТА" << endl;
	cin >> index;

	cout << "ВВЕДИТЕ КОЛ-ВО ПЕРЕМЕЩЕНИЙ" << endl;
	cin >> count;

	cout << "СМЕЩЕНИЕ ЭЛЕМЕНТА НОМЕР"<< index << " НА " << count << endl;

	PNode tmp = First;
	PNode pred = NULL;

	for (int i = 1; i < index; i++)
	{
		if (tmp->Next != NULL)
		{
			pred = tmp;
			tmp = tmp->Next;
		}
		else
		{
			cout << "ОШИБКА ВВОДА" << endl;
			return;
		}
	}
	
	for (int i = 0; i < count; i++)
	{
		PNode p = tmp->Next->Next;
		pred->Next = tmp->Next;
		tmp->Next->Next = tmp;
		tmp->Next = p;
		pred = pred->Next;
	}

	cout << endl;
}

int main()
{
	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);
	
	PNode First = NULL;

	InputList(First);
	PrintList(First);
	MoveElement(First);
	PrintList(First);

	system("pause");
	return 0;
}