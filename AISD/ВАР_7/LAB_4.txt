#include<iostream>
#include<conio.h>
#include<time.h>
#include<windows.h>

using namespace std;

int arr[1000];
int len = 0;

void sortArray()
{
	for (int i = 0; i < len - 1; i++)
	{
		for (int j = i; j < len; j++)
		{
			if (arr[i] > arr[j])
			{
				int tmp = arr[i];
				arr[i] = arr[j];
				arr[j] = tmp;
			}
		}
	}
}

int lineSearch(int n)
{
	int res = -1;
	for (int i = 0; i < len; i++)
	{
		if (arr[i] == n)
		{
			res = i;
		}
	}

	return res;
}

int binarySearch(int n)
{
	sortArray();

	int res = -1;

	int g1 = 0, g2 = len - 1, i = g1;

	while (g1 <= g2)
	{
		i = (g1 + g2) / 2;

		if (n > arr[i])
		{
			g1 = i + 1;
		}
		else if (n < arr[i])
		{
			g2 = i - 1;
		}

		if (arr[i] == n)
		{
			res = i;
			break;
		}
	}

	return res;
}

int indexSearch(int n)
{
	sortArray();

	int res = -1;

	int h = 3;
	for (int i = h - 1; i < len; i += h)
	{
		if (n <= arr[i])
		{
			for (int j = i; j > i - h; j--)
			{
				if (arr[j] == n)
				{
					res = j;
					break;
				}
			}
		}
	}

	if (res == -1)
	{
		for (int i = len / h * h; i < len; i++)
		{
			if (arr[i] == n)
			{
				res = i;
				break;
			}
		}
	}

	return res;
}

void showMenu()
{
	system("cls");
	cout << "===CHOOSE===" << endl;
	cout << "1 = Input array" << endl;
	cout << "2 = Random array" << endl;
	cout << "3 = Print array" << endl;
	cout << "4 = Search array" << endl;
	cout << "5 = Exit" << endl;
}

void inputSize()
{
	cout << "INPUT SIZE ARRAY: ";
	cin >> len;
	cout << endl;
}

void randomArray()
{
	cout << "RANDOM" << endl;
	inputSize();

	for (int i = 0; i < len; i++)
	{
		arr[i] = rand() % 100;
	}

	system("pause");
}

void inputArray()
{
	cout << "INPUT" << endl;
	inputSize();

	int tmp;
	for (int i = 0; i < len; i++)
	{
		cout << i << " = ";
		cin >> tmp;
		arr[i] = tmp;
	}
	cout << endl;

	system("pause");
}

void printArray()
{
	cout << "PRINT" << endl;

	for (int i = 0; i < len; i++)
	{
		cout << arr[i] << " ";
	}
	cout << endl;

	system("pause");
}

void printResult(int n, int res)
{
	if (res == -1)
		cout << "NOT FOUND" << endl;
	else
		cout << n << " - FOUND index = " << res << endl;
}

void searchArray()
{
	sortArray();
	int n, res;
	cout << "Введите элемент для поиска :";
	cin >> n;

	cout << "линейный" << endl;
	res = lineSearch(n);
	printResult(n, res);

	cout << "бинарный" << endl;
	res = binarySearch(n);
	printResult(n, res);

	cout << "индексный" << endl;
	res = indexSearch(n);
	printResult(n, res);

	int count = 0;
	for (int i = 0; i < len; i++)
			if (arr[i] == n)
				count++;
	cout << "Кол-во сравнений = " << count << endl;

	system("pause");
}

int main()
{
	srand(time(NULL));

	SetConsoleCP(1251);
	SetConsoleOutputCP(1251);

	while (true)
	{
		showMenu();

		int choose;
		cin >> choose;

		switch (choose)
		{
		case 1: inputArray(); break;
		case 2: randomArray(); break;
		case 3: printArray(); break;
		case 4: searchArray(); break;
		case 5: system("esc"); break;
		default: cout << "ERROR" << endl;
		}
	}

	system("pause");
	return 1;
}